<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Giỏ hàng</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/Main.css">
    <link rel="stylesheet" href="../css/Home.css">
    <link rel="stylesheet" href="../css/responsive-utilities.css">
    <link rel="stylesheet" href="../css/Car.css">
    <script src="../js/App.js" defer></script>
    <script src="../js/Home.js" defer></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" type="image/png" sizes="32x32" href="../assets/Logo.png">
	<link rel="apple-touch-icon" href="../assets/Logo.png">

</head>
<body>
    <header class="main-header">
        <div class="header-container">
            <div class="header-logo">
                <img src="../assets/Logo.png" alt="Logo Lê Phú Quới" class="logo-img">
            </div>
        </div>
    </header>
    <nav class="main-nav">
        <div class="nav-container">
            <div class="nav-links">
                <a href="../Home.html" class="nav-link">Trang chủ</a>
                <a href="About.html" class="nav-link">Giới thiệu</a>
                <a href="Product.html" class="nav-link">Sản phẩm</a>
                <a href="Blog.html" class="nav-link">Tin tức</a>
                <a href="Contact.html" class="nav-link">Liên hệ</a>
            </div>
            <div class="nav-actions">
                <a href="Login.html" class="nav-account" title="Tài khoản">
                    <i class="fa fa-user"></i>
                </a>
                <a href="Car.html" class="nav-cart active" title="Giỏ hàng">
                    <i class="fa fa-shopping-cart"></i>
                    <span id="cart-count">0</span>
                </a>
            </div>
            <button class="mobile-menu-toggle" aria-label="Toggle menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </nav>
    <div class="nav-search-bar">
        <form class="search-form" onsubmit="event.preventDefault(); alert('Tìm kiếm: ' + this.q.value);">
            <input type="text" name="q" placeholder="Tìm kiếm sản phẩm, tin tức..." autocomplete="off">
            <button type="submit" title="Tìm kiếm" aria-label="Tìm kiếm sản phẩm">
                <i class="fa fa-search"></i>
            </button>
        </form>
    </div>
    <div class="cart-container">
        <div class="cart-title">Giỏ hàng của bạn</div>
        <div id="cart-list"></div>
        <div class="cart-summary" id="cart-summary"></div>
        <div class="cart-checkout-container">
            <button class="cart-checkout-btn" onclick="checkout()" title="Thanh toán đơn hàng" aria-label="Tiến hành thanh toán đơn hàng">Thanh toán</button>
        </div>
    </div>
    <div id="toast" class="toast"></div>
    <footer class="main-footer">
            <div class="footer-top">
                <div class="footer-col">
                    <h4>FAQ</h4>
                    <ul>
                        <li><a href="#">Track Your Order</a></li>
                        <li><a href="#">Store Locations</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Client Services</h4>
                    <ul>
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Refund Policy</a></li>
                        <li><a href="#">Delivery Policy</a></li>
                    </ul>
                </div>
                <div class="footer-col newsletter-col">
                    <h4>Newsletter</h4>
                    <p>Đăng ký nhận tin khuyến mãi và kiến thức nông nghiệp mới nhất!</p>
                    <form class="newsletter-form" onsubmit="event.preventDefault(); alert('Đã đăng ký email!');">
                        <input type="email" placeholder="Nhập email của bạn" required>
                        <button type="submit" title="Gửi email đăng ký" aria-label="Gửi email đăng ký newsletter">Send</button>
                    </form>
                </div>
            </div>
            <div class="footer-bottom">
                <div class="footer-social">
                    <a href="#" class="footer-social-icon" title="Facebook"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="footer-social-icon" title="Instagram"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="footer-social-icon" title="TikTok"><i class="fab fa-tiktok"></i></a>
                    <a href="#" class="footer-social-icon" title="YouTube"><i class="fab fa-youtube"></i></a>
                </div>
                <div class="footer-payments">
                    <i class="fab fa-cc-mastercard"></i>
                    <i class="fab fa-cc-visa"></i>
                    <i class="fab fa-cc-jcb"></i>
                </div>
                <div class="footer-copyright">
                    <span>&copy; 2025 Lê Phú Quới. Cung cấp bởi lephuquoi.com</span>
                </div>
            </div>
        </footer>
    <script>
    // Danh sách sản phẩm mẫu (có thể lấy từ localStorage hoặc backend thực tế)
    const productImages = {
    'Phân bón': '../assets/1.jpg',
    'Hạt giống': '../assets/1.jpg',
    'Màng phủ nông nghiệp': '../assets/1.jpg',
    'Lưới che nắng': '../assets/1.jpg',
    'Dụng cụ làm vườn': '../assets/1.jpg',
    'Phân bón hữu cơ cao cấp': '../assets/1.jpg',
    'Phân NPK tổng hợp': '../assets/1.jpg',
    'Phân bón xuất khẩu': '../assets/1.jpg',
    'Phân bón hữu cơ 2': '../assets/1.jpg',
    'Phân NPK chuyên dụng': '../assets/1.jpg',
    'Phân bón hữu cơ 3': '../assets/1.jpg',
    'Dụng cụ làm vườn 95k': '../assets/1.jpg',
    'Phân bón xuất khẩu 1': '../assets/1.jpg',
    'Phân bón xuất khẩu 2': '../assets/1.jpg',
    'Phân bón xuất khẩu 3': '../assets/1.jpg',
    'Phân bón hữu cơ 1': '../assets/1.jpg',
    'Phân bón hữu cơ 4': '../assets/1.jpg',
    'Phân NPK 1': '../assets/3.png',
    'Phân NPK 2': '../assets/4.png',
    'Phân NPK 3': '../assets/5.png',
    'Dụng cụ làm vườn đa năng': '../assets/1.jpg',
    'Hạt giống cao cấp': '../assets/2.png',
    'Hạt giống chất lượng cao': '../assets/1.jpg',
    'Màng phủ cao cấp': '../assets/2.png'
    };
    const productPrices = {
    'Dụng cụ làm vườn đa năng': 120000,
    'Hạt giống cao cấp': 45000,
    'Lưới che nắng': 60000,
    'Phân bón': 120000,
    'Hạt giống': 35000,
    'Màng phủ nông nghiệp': 90000,
    'Lưới che nắng': 70000,
    'Dụng cụ làm vườn': 50000,
    'Phân bón hữu cơ cao cấp': 200000,
    'Phân NPK tổng hợp': 100000,
    'Phân bón xuất khẩu': 180000,
    'Phân bón xuất khẩu 1': 180000,
    'Phân bón xuất khẩu 2': 175000,
    'Phân bón xuất khẩu 3': 190000,
    'Phân bón hữu cơ 1': 120000,
    'Phân bón hữu cơ 2': 125000,
    'Phân bón hữu cơ 3': 130000,
    'Phân bón hữu cơ 4': 128000,
    'Phân NPK 1': 95000,
    'Phân NPK 2': 98000,
    'Phân NPK 3': 100000,
    'Phân NPK chuyên dụng': 150000,
    'Dụng cụ làm vườn 95k': 95000,
    'Hạt giống chất lượng cao': 35000,
    'Màng phủ cao cấp': 110000
    };
    function getCart() {
        return JSON.parse(localStorage.getItem('cart') || '{}');
    }
    function setCart(cart) {
        localStorage.setItem('cart', JSON.stringify(cart));
    }
    function updateCartCount() {
        var cart = getCart();
        var count = Object.values(cart).reduce((a,b) => a+b, 0);
        document.getElementById('cart-count').innerText = count;
    }
    function showToast(msg) {
        var toast = document.getElementById('toast');
        toast.innerText = msg;
        toast.classList.add('show');
        setTimeout(()=>toast.classList.remove('show'), 2000);
    }
    function changeQty(product, delta) {
        var cart = getCart();
        if(!cart[product]) return;
        cart[product] += delta;
        if(cart[product]<=0) delete cart[product];
        setCart(cart);
        renderCart();
        updateCartCount();
        showToast('Đã cập nhật số lượng!');
    }
    function removeFromCart(product) {
        var cart = getCart();
        if(cart[product]) {
            delete cart[product];
            setCart(cart);
            renderCart();
            updateCartCount();
            showToast('Đã xóa sản phẩm khỏi giỏ hàng!');
        }
    }
    function renderCart() {
        var cart = getCart();
        var keys = Object.keys(cart);
        var html = '';
        var total = 0;
        if(keys.length===0) {
            html = '<div class="cart-empty">Không có gì trong giỏ hàng của bạn.<br><a href=\"Product.html\" style=\"color:#388e3c;font-weight:bold;\">Tiếp tục mua sắm</a></div>';
            document.getElementById('cart-list').innerHTML = html;
            document.getElementById('cart-summary').innerHTML = '';
            return;
        }
        html += '<table class="cart-list">';
        html += '<tr><th></th><th>Sản phẩm</th><th>Đơn giá</th><th>Số lượng</th><th>Thành tiền</th><th></th></tr>';

        keys.forEach(function(item, idx){
            var price = productPrices[item]||0;
            var qty = cart[item];
            var img = productImages[item]||'';
            var subtotal = price*qty;
            total += subtotal;
                html += '<tr style="animation-delay:'+(idx*0.07)+'s">'+
                    '<td><img src="'+img+'" class="cart-img"></td>'+
                    '<td>'+item+'</td>'+
                    '<td>'+price.toLocaleString('vi-VN')+' đ</td>'+
                    '<td class="cart-qty">'+
                        '<button class="cart-qty-btn" onclick="changeQty(\''+item+'\',-1)" title="Giảm số lượng" aria-label="Giảm số lượng '+item+'">-</button>'+
                        '<span class="cart-qty-value">'+qty+'</span>'+
                        '<button class="cart-qty-btn" onclick="changeQty(\''+item+'\',1)" title="Tăng số lượng" aria-label="Tăng số lượng '+item+'">+</button>'+
                    '</td>'+
                    '<td>'+(subtotal).toLocaleString('vi-VN')+' đ</td>'+
                    '<td><button class="cart-remove" onclick="removeFromCart(\''+item+'\')" title="Xóa sản phẩm" aria-label="Xóa '+item+' khỏi giỏ hàng"><i class="fa fa-trash"></i></button></td>'+
                '</tr>';
        });
        html += '</table>';
        document.getElementById('cart-list').innerHTML = html;
        document.getElementById('cart-summary').innerHTML = '<strong>Tổng cộng: '+total.toLocaleString('vi-VN')+' đ</strong>';
        // Thêm hiệu ứng fade-in cho từng dòng
        setTimeout(()=>{
            document.querySelectorAll('.cart-list tr').forEach(tr=>tr.classList.add('animated'));
        }, 10);
    }
    function checkout() {
        window.location.href = "Payment.html";
    }
    updateCartCount();
    renderCart();
    </script>
</body>
</html>
