<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Giỏ hàng - Lê Phú Quới</title>
    <link rel="stylesheet" href="Home.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Hiệu ứng fade-in cho sản phẩm */
        .cart-list tr {
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInRow 0.5s forwards;
        }
        .cart-list tr.animated {
            opacity: 1;
            transform: none;
        }
        @keyframes fadeInRow {
            to {
                opacity: 1;
                transform: none;
            }
        }
        /* Hiệu ứng hover highlight dòng */
        .cart-list tr:hover {
            background: #f1f8e9;
            transition: background 0.2s;
        }
        /* Toast notification */
        .toast {
            position: fixed;
            bottom: 32px;
            right: 32px;
            background: #388e3c;
            color: #fff;
            padding: 16px 32px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
            font-size: 1rem;
            opacity: 0;
            pointer-events: none;
            z-index: 9999;
            transition: opacity 0.4s;
        }
        .toast.show {
            opacity: 1;
            pointer-events: auto;
        }
        /* Nút hiệu ứng */
        .cart-qty-btn, .cart-remove, .cart-checkout-btn {
            transition: transform 0.1s;
        }
        .cart-qty-btn:active, .cart-remove:active, .cart-checkout-btn:active {
            transform: scale(0.92);
        }
        .cart-container {
            max-width: 800px;
            margin: 40px auto;
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.08);
            padding: 32px 24px 24px 24px;
        }
        .cart-title {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 24px;
            color: #388e3c;
        }
        .cart-list {
            width: 100%;
            border-collapse: collapse;
        }
        .cart-list th, .cart-list td {
            padding: 12px 8px;
            border-bottom: 1px solid #e0e0e0;
            text-align: left;
        }
        .cart-list th {
            color: #388e3c;
            font-size: 1.1rem;
        }
        .cart-img {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 8px;
            background: #f4f4f4;
        }
        .cart-qty {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .cart-qty-btn {
            background: #e0e0e0;
            border: none;
            border-radius: 50%;
            width: 28px;
            height: 28px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: background 0.2s;
        }
        .cart-qty-btn:hover {
            background: #bdbdbd;
        }
        .cart-remove {
            color: #e53935;
            background: none;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
        }
        .cart-summary {
            margin-top: 32px;
            text-align: right;
        }
        .cart-summary strong {
            font-size: 1.2rem;
            color: #388e3c;
        }
        .cart-empty {
            text-align: center;
            color: #888;
            font-size: 1.1rem;
            margin: 40px 0;
        }
        .cart-checkout-btn {
            background: #388e3c;
            color: #fff;
            border: none;
            border-radius: 6px;
            padding: 12px 32px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            margin-top: 16px;
            transition: background 0.2s;
        }
        .cart-checkout-btn:hover {
            background: #2d6a4f;
        }
    </style>
</head>
<body>
    <header>
        <h1>Giỏ hàng</h1>
    </header>
    <nav>
    <a href="Home.html">Trang chủ</a>
    <a href="About.html">Giới thiệu</a>
    <a href="Product.html">Sản phẩm</a>
    <a href="New.html">Tin tức</a>
    <a href="Contact.html">Liên hệ</a>
    <a href="Car.html" style="float:right;position:relative;">
            <i class="fa fa-shopping-cart"></i>
            <span id="cart-count" style="background:#e53935;color:#fff;border-radius:50%;padding:2px 7px;font-size:12px;position:absolute;top:-8px;right:-12px;">0</span>
        </a>
    </nav>
    <div class="cart-container">
        <div class="cart-title">Giỏ hàng của bạn</div>
        <div id="cart-list"></div>
        <div class="cart-summary" id="cart-summary"></div>
        <div style="text-align:right">
            <button class="cart-checkout-btn" onclick="checkout()">Thanh toán</button>
        </div>
    </div>
    <div id="toast" class="toast"></div>
    <footer>
        &copy; 2025 Lê Phú Quới. All rights reserved.
    </footer>
    <script>
    // Danh sách sản phẩm mẫu (có thể lấy từ localStorage hoặc backend thực tế)
    const productImages = {
        'Phân bón': 'https://cdn.pixabay.com/photo/2017/01/20/00/30/fertilizer-1994360_1280.jpg',
        'Hạt giống': 'https://cdn.pixabay.com/photo/2016/11/29/09/32/seeds-1867297_1280.jpg',
        'Màng phủ nông nghiệp': 'https://cdn.pixabay.com/photo/2017/08/10/07/32/greenhouse-2626796_1280.jpg',
        'Lưới che nắng': 'https://cdn.pixabay.com/photo/2016/11/29/09/32/net-1867287_1280.jpg',
        'Dụng cụ làm vườn': 'https://cdn.pixabay.com/photo/2016/11/29/09/32/gardening-1867289_1280.jpg'
    };
    const productPrices = {
        'Phân bón': 120000,
        'Hạt giống': 35000,
        'Màng phủ nông nghiệp': 90000,
        'Lưới che nắng': 70000,
        'Dụng cụ làm vườn': 50000
    };
    function getCart() {
        return JSON.parse(localStorage.getItem('cart') || '{}');
    }
    function setCart(cart) {
        localStorage.setItem('cart', JSON.stringify(cart));
    }
    function updateCartCount() {
        var cart = getCart();
        var count = Object.values(cart).reduce((a,b) => a+b, 0);
        document.getElementById('cart-count').innerText = count;
    }
    function showToast(msg) {
        var toast = document.getElementById('toast');
        toast.innerText = msg;
        toast.classList.add('show');
        setTimeout(()=>toast.classList.remove('show'), 2000);
    }
    function changeQty(product, delta) {
        var cart = getCart();
        if(!cart[product]) return;
        cart[product] += delta;
        if(cart[product]<=0) delete cart[product];
        setCart(cart);
        renderCart();
        updateCartCount();
        showToast('Đã cập nhật số lượng!');
    }
    function removeFromCart(product) {
        var cart = getCart();
        if(cart[product]) {
            delete cart[product];
            setCart(cart);
            renderCart();
            updateCartCount();
            showToast('Đã xóa sản phẩm khỏi giỏ hàng!');
        }
    }
    function renderCart() {
        var cart = getCart();
        var keys = Object.keys(cart);
        var html = '';
        var total = 0;
        if(keys.length===0) {
            html = '<div class="cart-empty">Không có gì trong giỏ hàng của bạn.<br><a href=\"Product.html\" style=\"color:#388e3c;font-weight:bold;\">Tiếp tục mua sắm</a></div>';
            document.getElementById('cart-list').innerHTML = html;
            document.getElementById('cart-summary').innerHTML = '';
            return;
        }
        html += '<table class="cart-list">';
        html += '<tr><th></th><th>Sản phẩm</th><th>Đơn giá</th><th>Số lượng</th><th>Thành tiền</th><th></th></tr>';
        keys.forEach(function(item, idx){
            var price = productPrices[item]||0;
            var qty = cart[item];
            var img = productImages[item]||'';
            var subtotal = price*qty;
            total += subtotal;
            html += '<tr style="animation-delay:'+(idx*0.07)+'s">'+
                '<td><img src="'+img+'" class="cart-img"></td>'+
                '<td>'+item+'</td>'+
                '<td>'+price.toLocaleString('vi-VN')+' đ</td>'+
                '<td class="cart-qty">'+
                    '<button class="cart-qty-btn" onclick="changeQty(\''+item+'\',-1)">-</button>'+qty+
                    '<button class="cart-qty-btn" onclick="changeQty(\''+item+'\',1)">+</button>'+
                '</td>'+
                '<td>'+(subtotal).toLocaleString('vi-VN')+' đ</td>'+
                '<td><button class="cart-remove" onclick="removeFromCart(\''+item+'\')"><i class="fa fa-trash"></i></button></td>'+
            '</tr>';
        });
        html += '</table>';
        document.getElementById('cart-list').innerHTML = html;
        document.getElementById('cart-summary').innerHTML = '<strong>Tổng cộng: '+total.toLocaleString('vi-VN')+' đ</strong>';
        // Thêm hiệu ứng fade-in cho từng dòng
        setTimeout(()=>{
            document.querySelectorAll('.cart-list tr').forEach(tr=>tr.classList.add('animated'));
        }, 10);
    }
    function checkout() {
        var cart = getCart();
        if(Object.keys(cart).length===0) {
            showToast('Giỏ hàng trống!');
            return;
        }
        showToast('Cảm ơn bạn đã đặt hàng!');
        setTimeout(()=>{
            setCart({});
            renderCart();
            updateCartCount();
        }, 1200);
    }
    updateCartCount();
    renderCart();
    </script>
</body>
</html>
